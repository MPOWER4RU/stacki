<?xml version="1.0" standalone="no"?>
<graph>

	<description>
	Backend appliance graph for Stacki.
	</description>


	<!-- Graph Ordering for Kickstart Generation -->

	<order tail="HEAD">
		<head>partitions-save</head>
	</order>

	<order head="backend">
		<tail>base</tail>
	</order>

	<order head="firewall">
		<tail>client-firewall</tail>
	</order>

	<order tail="client-firewall">
		<head>networking-client</head>
	</order>

	<order head="storage-controller-client">
		<tail>nukedisks</tail>
	</order>

	<order head="nukedisks">
		<tail>partition</tail>
	</order>

	<order head="TAIL">
		<tail>backend</tail>
	</order>


	<!-- Graph OO Framework -->

	<edge from="backend" os="redhat">
		<to>client</to>
	</edge>

	<order head="ubuntu-base">
		<tail>ubuntu-netcfg</tail>
	</order>

	<order head="ubuntu-netcfg">
		<tail>ubuntu-mirror</tail>
	</order>

        <order head="ubuntu-mirror">
                <tail>ubuntu-aptsetup</tail>
        </order>

        <order head="ubuntu-aptsetup">
                <tail>ubuntu-clock-setup</tail>
        </order>

	<order head="ubuntu-clock-setup">
		<tail>ubuntu-partman</tail>
	</order>

	<order head="ubuntu-partman">
		<tail>ubuntu-user-setup</tail>
	</order>

	<order head="ubuntu-user-setup">
                <tail>ubuntu-passwd</tail>
        </order>

	<order head="ubuntu-passwd">
		<tail>ubuntu-tasksel</tail>
	</order>

	<order head="ubuntu-tasksel">
                <tail>ubuntu-pkgsel</tail>
        </order>

	<order head="ubuntu-pkgsel">
		<tail>ubuntu-late-command</tail>
	</order>

	<order head="ubuntu-late-command">
                <tail>ubuntu-grub-installer</tail>
        </order>

	<order head="ubuntu-grub-installer">
		<tail>ubuntu-finish-install</tail>
	</order>

	<edge from="backend" os="ubuntu">
		<to>ubuntu-base</to>
		<to>ubuntu-netcfg</to>
		<to>ubuntu-mirror</to>
		<to>ubuntu-apt-setup</to>
		<to>ubuntu-clock-setup</to>
		<to>ubuntu-user-setup</to>
		<to>ubuntu-passwd</to>
		<to>ubuntu-partman</to>
		<to>ubuntu-tasksel</to>
		<to>ubuntu-pkgsel</to>
		<to>ubuntu-late-command</to>
		<to>ubuntu-grub-installer</to>
		<to>ubuntu-finish-install</to>
	</edge>

	<edge from="client" os="redhat">
		<to>base</to>
		<to>ntp-client</to>
		<to>networking-client</to>
		<to>node-certs</to>
		<to>resolv</to>
		<to>partitions-save</to>
		<to>routes-client</to>
		<to>pxeboot</to>
		<to>storage-controller-client</to>
		<to>nukedisks</to>
	</edge>
		

	<edge from="client" to="client-firewall" cond="firewall"/>

</graph>

